_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{ODbA:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var c=a("o0o1"),r=a.n(c),n=a("HaE+"),s=a("Ewas"),i=a("RB2s"),l=a("wDBh");function o(){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(r.a.mark((function e(){var t,a,c,n,o,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.a.providers.Web3Provider(i.a.currentProvider),a=["event DataTransfer(string data_type, string timestamp, uint minPayment, address indexed source, uint indexed serialID, uint indexed tag)"],c=new l.a.Contract(s.a._address,a,t),(n=c.filters.DataTransfer()).fromBlock=0,n.toBlock="latest",e.next=8,t.getBlockNumber();case 8:return o=e.sent,e.next=11,t.getLogs(n);case 11:return d=e.sent.reverse(),e.abrupt("return",{blockNumber:o,events:d});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},ZoJ7:function(e,t,a){"use strict";function c(e){var t="";switch(e.topics[3].slice(-1)){case"1":t="Temperature";break;case"2":t="Humidity";break;case"3":t="Temp and Humidity";break;case"4":t="Pressure";break;case"5":t="Test Data";break;default:t="Any"}return t}a.d(t,"a",(function(){return c}))},dw6R:function(e,t,a){"use strict";a.r(t),function(e){var c=a("nKUr"),r=a("o0o1"),n=a.n(r),s=a("HaE+"),i=a("1OyB"),l=a("vuIU"),o=a("JX7q"),d=a("Ji7U"),b=a("md7G"),u=a("foSv"),j=a("rePB"),O=a("q1tI"),p=a("ikXu"),h=a("vFsZ"),f=a("+6Dn"),v=a("QetY"),g=a("TbSc"),m=a("5Yp1"),x=a("ODbA"),w=a("ZoJ7"),y=a("rUnp"),N=a("RB2s"),k=a("6/hJ"),C=a("pi6U"),R=a.n(C);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,c=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(c,arguments,r)}else a=c.apply(this,arguments);return Object(b.a)(this,a)}}var A=a("jSND"),D=function(t){Object(d.a)(r,t);var a=P(r);function r(){var t;Object(i.a)(this,r);for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return t=a.call.apply(a,[this].concat(l)),Object(j.a)(Object(o.a)(t),"state",{buyer_add:"",errorMessage:"",successMessage:"",loading:!1}),Object(j.a)(Object(o.a)(t),"onSubmit",function(){var a=Object(s.a)(n.a.mark((function a(c){var r,s,i,l,o,d,b,u,j,O,p,h,f,v,g;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),t.setState({loading:!0,errorMessage:"",successMessage:""}),r=+new Date,s=t.props.event,i=Object(y.a)(s),l=parseInt(s.topics[2],16),o=t.state.buyer_add,d=i[2]._hex,b="0x"+s.topics[1].substr(26,64),u=new e.from("51d6a4bb8508c91a3d78de5d4a137c83bb6f602998937e2c034f1c7eb656609c","hex"),a.prev=10,a.t0=N.a.utils,a.next=14,N.a.eth.getTransactionCount(o,"pending");case 14:return a.t1=a.sent,j=a.t0.toHex.call(a.t0,a.t1),console.log(j),O=R.a.forCustomChain("mainnet",{name:"localchain",networkId:777,chainId:777},"petersburg"),p=k.a.methods.EmitEvent(b,d,l,r.toString()).encodeABI(),h={nonce:j,from:o,gasLimit:N.a.utils.toHex(1e5),gasPrice:N.a.utils.toHex(1e10),to:k.a._address,data:p,value:d},(f=new A.Transaction(h,{common:O})).sign(u),v=f.serialize(),a.next=25,N.a.eth.sendSignedTransaction("0x"+v.toString("hex")).on("receipt",console.log);case 25:g=a.sent,t.setState({successMessage:"Transaction successfull, transaction hash: "+g.transactionHash}),a.next=32;break;case 29:a.prev=29,a.t2=a.catch(10),t.setState({errorMessage:a.t2.message});case 32:t.setState({loading:!1});case 33:case"end":return a.stop()}}),a,null,[[10,29]])})));return function(e){return a.apply(this,arguments)}}()),t}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.props.event,a=Object(y.a)(t),r=t.transactionHash,n=t.blockHash,s=t.blockNumber,i="0x"+t.topics[1].substr(26,64).toUpperCase(),l=Object(w.a)(t),o=parseInt(t.topics[2],16),d=a[2]._hex,b=new Date(parseInt(a[1])).toLocaleString(),u="yellow";return Object(c.jsx)(m.a,{children:Object(c.jsxs)("div",{children:[Object(c.jsxs)(p.a,{color:u,children:[Object(c.jsx)(p.a.Header,{children:Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.HeaderCell,{children:"Property"}),Object(c.jsx)(p.a.HeaderCell,{children:"Value"})]})}),Object(c.jsxs)(p.a.Body,{children:[Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Transaction Hash:"}),Object(c.jsx)(p.a.Cell,{children:r})]}),Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Block Hash:"}),Object(c.jsx)(p.a.Cell,{children:n})]}),Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Block Number:"}),Object(c.jsx)(p.a.Cell,{children:s})]}),Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Data Owner:"}),Object(c.jsx)(p.a.Cell,{children:i})]}),Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Data Tags:"}),Object(c.jsx)(p.a.Cell,{children:l})]}),Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Data ID:"}),Object(c.jsx)(p.a.Cell,{children:o})]}),Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Data Cost:"}),Object(c.jsxs)(p.a.Cell,{children:[parseInt(d,16)," Tokens"]})]}),Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(p.a.Cell,{children:"Timestamp:"}),Object(c.jsx)(p.a.Cell,{children:b})]})]})]},u),Object(c.jsx)(h.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage,success:!!this.state.successMessage,children:Object(c.jsxs)(f.a,{children:[Object(c.jsxs)(f.a.Row,{children:[Object(c.jsx)(f.a.Column,{width:8,children:Object(c.jsx)(h.a.Input,{flex:"true",label:{children:"Your Address:",style:{fontSize:"16px"}},placeholder:"0xabcd1234",id:"buyer_add",value:this.state.buyer_add,onChange:function(t){return e.setState({buyer_add:t.target.value})}})}),Object(c.jsx)(f.a.Column,{verticalAlign:"middle",width:5,children:Object(c.jsxs)(v.a,{loading:this.state.loading,primary:!0,children:["Buy for ",parseInt(d,16)," Tokens"]})})]}),Object(c.jsx)("h4",{}),Object(c.jsx)(g.a,{error:!0,header:"Oops!",content:this.state.errorMessage}),Object(c.jsx)(g.a,{success:!0,header:"Completed!",content:this.state.successMessage})]})})]})})}}],[{key:"getInitialProps",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var a,c,r,s,i,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.address,e.next=3,Object(x.a)();case 3:return c=e.sent,r=c.events,s=function(e){return e.transactionHash===a},i=r.findIndex(s),l=r[i],e.abrupt("return",{event:l});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O.Component);t.default=D}.call(this,a("HDXh").Buffer)},ikXu:function(e,t,a){"use strict";var c=a("wx14"),r=a("zmn3"),n=a("iuhU"),s=(a("17x9"),a("q1tI")),i=a.n(s),l=a("ZeOK"),o=a("ICNK"),d=a("Y53p"),b=a("H+2d");function u(e){var t=e.children,a=e.className,r=Object(n.a)(a),s=Object(o.a)(u,e),l=Object(d.a)(u,e);return i.a.createElement(l,Object(c.a)({},s,{className:r}),t)}u.handledProps=["as","children","className"],u.defaultProps={as:"tbody"},u.propTypes={};var j=u,O=a("MZgk"),p=a("D1pA");function h(e){var t=e.active,a=e.children,r=e.className,s=e.collapsing,u=e.content,j=e.disabled,O=e.error,f=e.icon,v=e.negative,g=e.positive,m=e.selectable,x=e.singleLine,w=e.textAlign,y=e.verticalAlign,N=e.warning,k=e.width,C=Object(n.a)(Object(l.a)(t,"active"),Object(l.a)(s,"collapsing"),Object(l.a)(j,"disabled"),Object(l.a)(O,"error"),Object(l.a)(v,"negative"),Object(l.a)(g,"positive"),Object(l.a)(m,"selectable"),Object(l.a)(x,"single line"),Object(l.a)(N,"warning"),Object(l.d)(w),Object(l.f)(y),Object(l.g)(k,"wide"),r),R=Object(o.a)(h,e),P=Object(d.a)(h,e);return b.a.isNil(a)?i.a.createElement(P,Object(c.a)({},R,{className:C}),p.a.create(f),u):i.a.createElement(P,Object(c.a)({},R,{className:C}),a)}h.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],h.defaultProps={as:"td"},h.propTypes={},h.create=Object(O.e)(h,(function(e){return{content:e}}));var f=h;function v(e){var t=e.children,a=e.className,r=e.content,s=e.fullWidth,u=Object(n.a)(Object(l.a)(s,"full-width"),a),j=Object(o.a)(v,e),O=Object(d.a)(v,e);return i.a.createElement(O,Object(c.a)({},j,{className:u}),b.a.isNil(t)?r:t)}v.handledProps=["as","children","className","content","fullWidth"],v.defaultProps={as:"thead"},v.propTypes={};var g=v;function m(e){var t=e.as,a=Object(o.a)(m,e);return i.a.createElement(g,Object(c.a)({},a,{as:t}))}m.handledProps=["as"],m.propTypes={},m.defaultProps={as:"tfoot"};var x=m;function w(e){var t=e.as,a=e.className,r=e.sorted,s=Object(n.a)(Object(l.e)(r,"sorted"),a),d=Object(o.a)(w,e);return i.a.createElement(f,Object(c.a)({},d,{as:t,className:s}))}w.handledProps=["as","className","sorted"],w.propTypes={},w.defaultProps={as:"th"};var y=w;function N(e){var t=e.active,a=e.cellAs,s=e.cells,u=e.children,j=e.className,O=e.disabled,p=e.error,h=e.negative,v=e.positive,g=e.textAlign,m=e.verticalAlign,x=e.warning,w=Object(n.a)(Object(l.a)(t,"active"),Object(l.a)(O,"disabled"),Object(l.a)(p,"error"),Object(l.a)(h,"negative"),Object(l.a)(v,"positive"),Object(l.a)(x,"warning"),Object(l.d)(g),Object(l.f)(m),j),y=Object(o.a)(N,e),k=Object(d.a)(N,e);return b.a.isNil(u)?i.a.createElement(k,Object(c.a)({},y,{className:w}),Object(r.a)(s,(function(e){return f.create(e,{defaultProps:{as:a}})}))):i.a.createElement(k,Object(c.a)({},y,{className:w}),u)}N.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],N.defaultProps={as:"tr",cellAs:"td"},N.propTypes={},N.create=Object(O.e)(N,(function(e){return{cells:e}}));var k=N;function C(e){var t=e.attached,a=e.basic,s=e.celled,u=e.children,O=e.className,p=e.collapsing,h=e.color,f=e.columns,v=e.compact,m=e.definition,w=e.fixed,y=e.footerRow,N=e.headerRow,R=e.headerRows,P=e.inverted,A=e.padded,D=e.renderBodyRow,T=e.selectable,E=e.singleLine,H=e.size,_=e.sortable,B=e.stackable,I=e.striped,S=e.structured,M=e.tableData,U=e.textAlign,J=e.unstackable,L=e.verticalAlign,X=Object(n.a)("ui",h,H,Object(l.a)(s,"celled"),Object(l.a)(p,"collapsing"),Object(l.a)(m,"definition"),Object(l.a)(w,"fixed"),Object(l.a)(P,"inverted"),Object(l.a)(T,"selectable"),Object(l.a)(E,"single line"),Object(l.a)(_,"sortable"),Object(l.a)(B,"stackable"),Object(l.a)(I,"striped"),Object(l.a)(S,"structured"),Object(l.a)(J,"unstackable"),Object(l.b)(t,"attached"),Object(l.b)(a,"basic"),Object(l.b)(v,"compact"),Object(l.b)(A,"padded"),Object(l.d)(U),Object(l.f)(L),Object(l.g)(f,"column"),"table",O),z=Object(o.a)(C,e),Z=Object(d.a)(C,e);if(!b.a.isNil(u))return i.a.createElement(Z,Object(c.a)({},z,{className:X}),u);var q={defaultProps:{cellAs:"th"}},Y=(N||R)&&i.a.createElement(g,null,k.create(N,q),Object(r.a)(R,(function(e){return k.create(e,q)})));return i.a.createElement(Z,Object(c.a)({},z,{className:X}),Y,i.a.createElement(j,null,D&&Object(r.a)(M,(function(e,t){return k.create(D(e,t))}))),y&&i.a.createElement(x,null,k.create(y)))}C.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],C.defaultProps={as:"table"},C.propTypes={},C.Body=j,C.Cell=f,C.Footer=x,C.Header=g,C.HeaderCell=y,C.Row=k;t.a=C},rUnp:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a("wDBh");function r(e){return(new c.a.utils.AbiCoder).decode(["string","string","uint"],e.data)}},uHmg:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data/show",function(){return a("dw6R")}])}},[["uHmg",0,2,1,3,4,6,5,7,8,9,11]]]);