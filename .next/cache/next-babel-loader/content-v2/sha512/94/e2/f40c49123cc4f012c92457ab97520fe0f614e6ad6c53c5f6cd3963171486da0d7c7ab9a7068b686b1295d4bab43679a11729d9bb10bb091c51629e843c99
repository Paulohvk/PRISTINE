{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n//Show all transactions\nimport React, { Component } from 'react';\nimport { Card, Grid } from \"semantic-ui-react\";\nimport Layout from '../../components/Layout';\nimport getBuyEvents from '../../components/getBuyEvents';\nimport decodeBuyingData from '../../components/decodeBuyingData';\n\nclass Market extends Component {\n  static async getInitialProps() {\n    var results = await getBuyEvents();\n    const blockNumber = results.blockNumber;\n    const decodedEvents = results.events; // console.log(decodedEvents);\n\n    return {\n      blockNumber,\n      decodedEvents\n    };\n  }\n\n  renderTransactions() {\n    const style = {\n      color: \"#33364d\"\n    };\n    const items = this.props.decodedEvents.map(item => {\n      //console.log(item);\n      console.log(1);\n      const decodedData = decodeBuyingData(item);\n      const recipient = decodedData[0];\n      const cost = parseInt(decodedData[1]._hex, 16);\n      const buyer = \"0x\" + item.topics[1].substr(26, 64).toUpperCase();\n      const dataID = parseInt(item.topics[2], 16); // const timestamp = new Date(parseInt(item.topics[3])).toLocaleString();\n      // console.log(Date(parseInt(item.topics[3])).toLocaleString())\n\n      return {\n        header: item.transactionHash,\n        meta: \"Block: \" + item.blockNumber,\n        description: /*#__PURE__*/_jsx(Grid, {\n          verticalAlign: \"middle\",\n          children: /*#__PURE__*/_jsx(Grid.Row, {\n            children: /*#__PURE__*/_jsxs(Grid.Column, {\n              floated: \"left\",\n              width: 13,\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"Buyer: \", buyer]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"Seller: \", recipient]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"Data ID: \", dataID]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"Price: \", cost, \" Tokens\"]\n              })]\n            })\n          })\n        }),\n        fluid: true,\n        color: 'yellow'\n      };\n    });\n    return /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(Grid, {\n        verticalAlign: \"middle\",\n        children: /*#__PURE__*/_jsx(Grid.Row, {\n          children: /*#__PURE__*/_jsxs(Grid.Column, {\n            floated: \"left\",\n            width: 13,\n            children: [/*#__PURE__*/_jsx(\"h3\", {\n              children: \"This page shows all the data traded in the market.\"\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"There are currently \", this.props.blockNumber, \" blocks in the blockchain.\"]\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"Smart contract address: \", this.props.decodedEvents[0].address, \".\"]\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"Event signature: \", this.props.decodedEvents[0].topics[0], \".\"]\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"Showing a total of \", this.props.decodedEvents.length, \" events.\"]\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(Card.Group, {\n        items: items\n      })]\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(Layout, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        children: this.renderTransactions()\n      })\n    });\n  }\n\n}\n\nexport default Market;","map":null,"metadata":{},"sourceType":"module"}