{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/paulo/Desktop/Private_Blockchain/Web/WebApp/pages/data/show.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { Form, Button, Message, Table, Grid, Modal } from \"semantic-ui-react\";\nimport Layout from \"../../components/Layout\";\nimport getEvents from \"../../components/getEvents\";\nimport getTags from \"../../components/getTags\";\nimport decodeData from \"../../components/decodeData\";\nimport web3 from \"../../Ethereum/web3\";\n\nvar Show = /*#__PURE__*/function (_Component) {\n  _inherits(Show, _Component);\n\n  var _super = _createSuper(Show);\n\n  function Show() {\n    var _this;\n\n    _classCallCheck(this, Show);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      buyer_add: \"\",\n      acc_pass: \"\",\n      errorMessage: \"\",\n      successMessage: \"\",\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var timestamp, e, decodedData, dataID, addressFrom, password, transferValue, recipient, test;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n\n                _this.setState({\n                  loading: true,\n                  errorMessage: \"\",\n                  successMessage: \"\"\n                });\n\n                timestamp = +new Date();\n                console.log(timestamp);\n                e = _this.props.event;\n                decodedData = decodeData(e);\n                dataID = parseInt(e.topics[2], 16);\n                addressFrom = _this.state.buyer_add;\n                password = _this.state.acc_pass;\n                transferValue = decodedData[2]._hex;\n                recipient = \"0x\" + e.topics[1].substr(26, 64); // console.log('1 ' + dataID);\n\n                console.log('2 ' + addressFrom);\n                console.log('3 ' + password); // console.log('3 ' + transferValue);\n                // console.log('4 ' + recipient);\n\n                _context.next = 15;\n                return web3.eth.unlockAccount(addressFrom.toString(), password.toString());\n\n              case 15:\n                test = _context.sent;\n                console.log(test);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  _createClass(Show, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var e = this.props.event;\n      var decodedData = decodeData(e);\n      var txHash = e.transactionHash;\n      var blockHash = e.blockNumber;\n      var blockNumber = e.blockNumber;\n      var dataOwner = \"0x\" + e.topics[1].substr(26, 64).toUpperCase();\n      var dataType = getTags(e);\n      var dataID = parseInt(e.topics[2], 16);\n      var cost = decodedData[2]._hex;\n      var timestamp = new Date(parseInt(decodedData[1])).toLocaleString();\n      var colour = \"yellow\";\n      return /*#__PURE__*/_jsxDEV(Layout, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Table, {\n            color: colour,\n            children: [/*#__PURE__*/_jsxDEV(Table.Header, {\n              children: /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                  children: \"Property\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                  children: \"Value\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Table.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Transaction Hash:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: txHash\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Block Hash:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: blockHash\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Block Number:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: blockNumber\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Data Owner:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: dataOwner\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Data Tags:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: dataType\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Data ID:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: dataID\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Data Cost:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: [parseInt(cost, 16), \" ETH\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: \"Timestamp:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                  children: timestamp\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 13\n            }, this)]\n          }, colour, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: this.onSubmit,\n            error: !!this.state.errorMessage,\n            success: !!this.state.successMessage,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              children: /*#__PURE__*/_jsxDEV(Grid.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Grid.Column, {\n                  width: 8,\n                  children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n                    flex: true,\n                    label: {\n                      children: \"Your Address:\",\n                      style: {\n                        fontSize: '16px'\n                      }\n                    },\n                    placeholder: \"0xabcd1234\",\n                    id: \"buyer_add\",\n                    value: this.state.buyer_add,\n                    onChange: function onChange(event) {\n                      return _this2.setState({\n                        buyer_add: event.target.value\n                      });\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n                    flex: true,\n                    label: {\n                      children: \"Account Password:\",\n                      style: {\n                        fontSize: '16px'\n                      }\n                    },\n                    placeholder: \"*****\",\n                    id: \"acc_pass\",\n                    value: this.state.acc_pass,\n                    onChange: function onChange(event) {\n                      return _this2.setState({\n                        acc_pass: event.target.value\n                      });\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Message, {\n                    error: true,\n                    header: \"Oops!\",\n                    content: this.state.errorMessage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Message, {\n                    success: true,\n                    header: \"Completed!\",\n                    content: this.state.successMessage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(Grid.Column, {\n                  verticalAlign: \"middle\",\n                  width: 5,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    loading: this.state.loading,\n                    primary: true,\n                    children: [\"Buy for \", parseInt(cost, 16), \" ETH\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this);\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(props) {\n        var address, results, decodedEvents, aux, index, event;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                address = props.query.address;\n                _context2.next = 3;\n                return getEvents();\n\n              case 3:\n                results = _context2.sent;\n                decodedEvents = results.events;\n\n                aux = function aux(item) {\n                  return item.transactionHash === address;\n                };\n\n                index = decodedEvents.findIndex(aux);\n                event = decodedEvents[index];\n                return _context2.abrupt(\"return\", {\n                  event: event\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x2) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Show;\n}(Component);\n\nexport default Show;","map":{"version":3,"sources":["/home/paulo/Desktop/Private_Blockchain/Web/WebApp/pages/data/show.js"],"names":["React","Component","Form","Button","Message","Table","Grid","Modal","Layout","getEvents","getTags","decodeData","web3","Show","buyer_add","acc_pass","errorMessage","successMessage","loading","event","preventDefault","setState","timestamp","Date","console","log","e","props","decodedData","dataID","parseInt","topics","addressFrom","state","password","transferValue","_hex","recipient","substr","eth","unlockAccount","toString","test","txHash","transactionHash","blockHash","blockNumber","dataOwner","toUpperCase","dataType","cost","toLocaleString","colour","onSubmit","children","style","fontSize","target","value","address","query","results","decodedEvents","events","aux","item","index","findIndex"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Button, Message, Table, Grid, Modal } from \"semantic-ui-react\";\nimport Layout from \"../../components/Layout\";\nimport getEvents from \"../../components/getEvents\";\nimport getTags from \"../../components/getTags\";\nimport decodeData from \"../../components/decodeData\";\nimport web3 from \"../../Ethereum/web3\";\n\nclass Show extends Component {\n\n  state = {\n    buyer_add: \"\",\n    acc_pass: \"\",\n    errorMessage: \"\",\n    successMessage: \"\",\n    loading: false,\n  };\n\n  static async getInitialProps(props) {\n    const address = props.query.address;\n    const results = await getEvents();\n    const decodedEvents = results.events;\n    const aux = (item) => item.transactionHash === address;\n    const index = decodedEvents.findIndex(aux);\n    const event = decodedEvents[index];\n    return { event };\n  }\n\n  onSubmit = async (event) => {\n    event.preventDefault();\n    this.setState({ loading: true, errorMessage: \"\", successMessage: \"\" });\n\n    const timestamp = +new Date();\n    console.log(timestamp);\n\n    const e = this.props.event;\n    const decodedData = decodeData(e);\n\n    const dataID = parseInt(e.topics[2], 16);\n    const addressFrom = this.state.buyer_add;\n    const password = this.state.acc_pass;\n    const transferValue = decodedData[2]._hex;\n    const recipient = \"0x\" + e.topics[1].substr(26, 64);\n    // console.log('1 ' + dataID);\n    console.log('2 ' + addressFrom);\n    console.log('3 ' + password);\n    // console.log('3 ' + transferValue);\n    // console.log('4 ' + recipient);\n\n    const test = await web3.eth.unlockAccount(addressFrom.toString(),password.toString());\n    console.log(test)\n  }\n\n  render() {\n    const e = this.props.event;\n    const decodedData = decodeData(e);\n    const txHash = e.transactionHash;\n    const blockHash = e.blockNumber;\n    const blockNumber = e.blockNumber;\n    const dataOwner = \"0x\" + e.topics[1].substr(26, 64).toUpperCase();\n    const dataType = getTags(e);\n    const dataID = parseInt(e.topics[2], 16);\n    const cost = decodedData[2]._hex;\n    const timestamp = new Date(parseInt(decodedData[1])).toLocaleString();\n\n    const colour = \"yellow\";\n\n    return (\n      <Layout>\n        <div>\n          <Table color={colour} key={colour}>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Property</Table.HeaderCell>\n                <Table.HeaderCell>Value</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n              <Table.Row>\n                <Table.Cell>Transaction Hash:</Table.Cell>\n                <Table.Cell>{txHash}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell>Block Hash:</Table.Cell>\n                <Table.Cell>{blockHash}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell>Block Number:</Table.Cell>\n                <Table.Cell>{blockNumber}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell>Data Owner:</Table.Cell>\n                <Table.Cell>{dataOwner}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell>Data Tags:</Table.Cell>\n                <Table.Cell>{dataType}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell>Data ID:</Table.Cell>\n                <Table.Cell>{dataID}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell>Data Cost:</Table.Cell>\n                <Table.Cell>{parseInt(cost, 16)} ETH</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell>Timestamp:</Table.Cell>\n                <Table.Cell>{timestamp}</Table.Cell>\n              </Table.Row>\n            </Table.Body>\n          </Table>\n          <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage} success={!!this.state.successMessage}>\n          <Grid>\n            <Grid.Row>\n              <Grid.Column width={8}>\n                    <Form.Input\n                      flex\n                      label={{ children: \"Your Address:\", style:{ fontSize: '16px' } }}\n                      placeholder=\"0xabcd1234\"\n                      id=\"buyer_add\"\n                      value={this.state.buyer_add}\n                      onChange={(event) => this.setState({ buyer_add: event.target.value })}\n                    />\n                    <Form.Input\n                      flex\n                      label={{ children: \"Account Password:\", style:{ fontSize: '16px' } }}\n                      placeholder=\"*****\"\n                      id=\"acc_pass\"\n                      value={this.state.acc_pass}\n                      onChange={(event) => this.setState({ acc_pass: event.target.value })}\n                    />\n                    <h4></h4>\n                    <Message error header=\"Oops!\" content={this.state.errorMessage} />\n                    <Message success header=\"Completed!\" content={this.state.successMessage} />\n              </Grid.Column>\n              <Grid.Column verticalAlign='middle' width={5}>\n                <Button loading={this.state.loading} primary>Buy for {parseInt(cost, 16)} ETH</Button>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n          </Form>\n          </div>\n      </Layout>\n    );\n  }\n}\nexport default Show;\n"]},"metadata":{},"sourceType":"module"}