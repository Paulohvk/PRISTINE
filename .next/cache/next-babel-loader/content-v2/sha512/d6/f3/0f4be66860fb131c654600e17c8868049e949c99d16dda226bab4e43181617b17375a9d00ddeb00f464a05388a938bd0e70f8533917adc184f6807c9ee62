{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { Component } from \"react\";\nimport { Button, Card, Grid, Segment } from \"semantic-ui-react\";\nimport Layout from \"../components/Layout\";\nimport { Link } from \"../routes\";\nimport getEvents from \"../components/getEvents\";\nimport getTags from \"../components/getTags\";\nimport decodeData from \"../components/decodeData\";\n\nclass TestIndex extends Component {\n  static async getInitialProps() {\n    var results = await getEvents();\n    const blockNumber = results.blockNumber;\n    const decodedEvents = results.events; // console.log(decodedEvents);\n\n    return {\n      blockNumber,\n      decodedEvents\n    };\n  }\n\n  renderMarketPlace() {\n    const style = {\n      color: \"#33364d\"\n    };\n    const items = this.props.decodedEvents.map(item => {\n      // console.log(item);\n      var dataType = getTags(item);\n      const decodedData = decodeData(item);\n      const timestamp = new Date(parseInt(decodedData[1])).toLocaleString();\n      const cost = parseInt(decodedData[2]._hex, 16);\n      return {\n        header: item.transactionHash,\n        meta: \"Block: \" + item.blockNumber,\n        description: /*#__PURE__*/_jsx(Grid, {\n          verticalAlign: \"middle\",\n          children: /*#__PURE__*/_jsxs(Grid.Row, {\n            children: [/*#__PURE__*/_jsxs(Grid.Column, {\n              floated: \"left\",\n              width: 13,\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"From: 0x\", item.topics[1].substr(26, 64).toUpperCase()]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"Tags: \", dataType]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"ID: \", parseInt(item.topics[2], 16)]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"Cost: \", cost, \" Tokens\"]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                style: style,\n                children: [\"Timestamp: \", timestamp]\n              })]\n            }), /*#__PURE__*/_jsx(Grid.Column, {\n              floated: \"right\",\n              width: 3,\n              children: /*#__PURE__*/_jsx(Link, {\n                route: `/data/${item.transactionHash}`,\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: /*#__PURE__*/_jsx(Button, {\n                    content: \"Buy this data\",\n                    icon: \"money\",\n                    primary: true\n                  })\n                })\n              })\n            })]\n          })\n        }),\n        fluid: true,\n        color: 'yellow'\n      };\n    });\n    return /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(Grid, {\n        verticalAlign: \"middle\",\n        children: /*#__PURE__*/_jsxs(Grid.Row, {\n          children: [/*#__PURE__*/_jsxs(Grid.Column, {\n            floated: \"left\",\n            width: 13,\n            children: [/*#__PURE__*/_jsx(\"h3\", {\n              children: \"Welcome to the Blockchain-powered Data Marketplace!\"\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"There are currently \", this.props.blockNumber, \" blocks in the blockchain.\"]\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"Smart contract address: \", this.props.decodedEvents[0].address, \".\"]\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"Event signature: \", this.props.decodedEvents[0].topics[0], \".\"]\n            }), /*#__PURE__*/_jsxs(\"h3\", {\n              children: [\"Showing a total of \", this.props.decodedEvents.length, \" events.\"]\n            })]\n          }), /*#__PURE__*/_jsx(Grid.Column, {\n            floated: \"right\",\n            width: 3,\n            children: /*#__PURE__*/_jsx(Link, {\n              route: \"/data/submit\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: /*#__PURE__*/_jsx(Button, {\n                  content: \"Submit Data\",\n                  icon: \"download\",\n                  primary: true\n                })\n              })\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Card.Group, {\n        items: items\n      })]\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(Layout, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        children: this.renderMarketPlace()\n      })\n    });\n  }\n\n}\n\nexport default TestIndex;","map":null,"metadata":{},"sourceType":"module"}